{% extends "base.html" %}

{% block title %}{% if collection.is_some() %}Edit{% else %}New{% endif %} Collection - Interne{% endblock %}

{% block content %}
<div class="form-page">
    <h1 class="form-heading">
        {% if collection.is_some() %}Edit Collection{% else %}New Collection{% endif %}
    </h1>

    <form method="post" action="{% if let Some(c) = collection %}/collections/{{ c.id }}{% else %}/collections{% endif %}" autocomplete="off">
        <div class="form-group">
            <label for="name">Name</label>
            <input
                type="text"
                id="name"
                name="name"
                required
                autofocus
                value="{% if let Some(c) = collection %}{{ c.name }}{% endif %}"
            >
            <div class="error-message">{% if let Some(err) = errors.get("name") %}{{ err }}{% endif %}</div>
        </div>

        <div class="form-actions">
            <button type="submit">Save</button>
            <a href="/collections">Cancel</a>
            {% if collection.is_some() %}
            <button
                type="button"
                class="link-button delete-button"
                hx-delete="/collections/{{ collection.as_ref().unwrap().id }}"
                hx-confirm="Delete this collection? All links will become private."
            >
                Delete
            </button>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}
